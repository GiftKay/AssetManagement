@model AssetManagement.Business.HelpDeskSystem.HelpDeskLogic
@{
    ViewBag.Title = "Index";
    string td_id = "";
    Layout = "~/Views/Shared/_Report.cshtml";

}
@*<style>
        #pdfBtn {
            background-color: #2991b4;
            color: white;
        }
        td {
            text-align: center;
        }
    </style>*@

<div style="margin-bottom:10%;"></div>
<h3 class="page-header"><i class="fa fa-list-alt"></i>Report</h3>

<ol class="breadcrumb">
    <li><i class="fa fa-home"></i>@Html.ActionLink("Home", "Dashboard", "Dashboard")</li>
    <li><i class="fa fa-file-text-o"></i>Report</li>
    <li><i class="fa fa-gear"></i>Tickets</li>
</ol>
<h3>Administrators</h3>

<table class="table table-striped table-condensed table-bordered">
    <tr>
        <th>Administrator</th>
        <th>Open Tickets</th>
        <th>Un Aknowlaged Tickets</th>
        <th>Completed Tickets</th>
        <th>All Tickets</th>
    </tr>
    @foreach (var admin in Model.AdministratorStats())
    {
        <tr>
            <td><a href="~/Tickets/TicketsFilter/@admin.employeeID">@admin.Name</a></td>
            <td align="center">
                @admin.OpenedTickets.Count()
            </td>
            <td align="center">
                @admin.UnAcknowalgedTickets
            </td>

            <td align="center">
                @admin.CompletedTickets
            </td>

            <td align="center">
                @admin.AllTickets
            </td>
        </tr>
    }
</table>

<h3>Technicians</h3>

<table class="table table-striped table-condensed table-bordered" id="TechniciansTable">
    <tr>
        <th>Technician</th>
        <th>Open</th>
        <th>Un Aknowlaged</th>
        <th>Completed</th>
        <th>All </th>
    </tr>
    @foreach (var Technician in Model.TechnicianStats())
    {
        td_id = Technician.employeeID.ToString();
        <tr>
            <td><a href="~/Tickets/TicketsFilter/@Technician.employeeID">@Technician.Name</a></td>
            <td align="center">
                @Technician.OpenedTickets.Count()
            </td>
            <td align="center">
                @Technician.UnAcknowalgedTickets
            </td>
            <td align="center">
                @Technician.CompletedTickets
            </td>
            <td align="center">
                @Technician.AllTickets
            </td>
        </tr>
    }
</table>
<table class="table table-striped table-condensed table-bordered" id="testTable">
    <thead>
        <tr>
            <th>Open</th>
            <th>UnAknowlaged</th>
            <th>Completed</th>
            <th>All</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>@Model.openTickets.Count</td>
            <td>@Model.unAknowlagedTickets.Count</td>
            <td>@Model.closedTickets.Count</td>
            <td>@Model.allTickets.Count</td>
        </tr><!---->
    </tbody>
</table>





























<table id="invoiceTable" style="display:none">
    <thead>
        <tr>
            <th>Technicians</th>
            <th>Open</th>
            <th>UnAknowlaged</th>
            <th>Completed </th>
            <th>All </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var admin in Model.AdministratorStats())
        {
            <tr>
                <td><a href="~/Tickets/TicketsFilter/@admin.employeeID">@admin.Name</a></td>

                <td align="center">
                    @admin.OpenedTickets.Count()
                </td>

                <td align="center">
                    @admin.UnAcknowalgedTickets
                </td>

                <td align="center">
                    @admin.CompletedTickets
                </td>

                <td align="center">
                    @admin.AllTickets
                </td>
            </tr>
        }
        
    </tbody>
    <tbody>
        @foreach (var tech in Model.TechnicianStats())
        {
            <tr>
                <td><a href="~/Tickets/TicketsFilter/@tech.employeeID">@tech.Name</a></td>

                <td align="center">
                    @tech.OpenedTickets.Count()
                </td>

                <td align="center">
                    @tech.UnAcknowalgedTickets
                </td>

                <td align="center">
                    @tech.CompletedTickets
                </td>

                <td align="center">
                    @tech.AllTickets
                </td>
            </tr>
        }
    </tbody>
    <thead>
    </thead>
    <tbody>
        <tr>
            <td>---------------------------------------------------------------------------------------------------</td>
        </tr>
    </tbody>
</table>

<button id="btn" onClick='run();'>Generate PDF</button>
<script src="~/Content/PDF/jquery.min.js"></script>
<script src="~/Content/PDF/tableExport.js"></script>
<script src="~/Content/PDF/jquery.base64.js"></script>
<script src="~/Content/PDF/sprintf.js"></script>
<script src="~/Content/PDF/jspdf.js"></script>
<script src="~/Content/PDF/base64.js"></script>
<script>
    function run() {
        $('#invoiceTable').show(1000);
        $('#invoiceTable').tableExport({ type: 'pdf', escape: 'false' })
    }
</script>
